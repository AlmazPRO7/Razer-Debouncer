# Разработка через WSL (идеальная конфигурация)

Этот проект взаимодействует с Windows API (LowLevel‑Hook), поэтому запуск и сборка должны происходить в Windows‑среде. WSL используется для редактирования кода и запуска вспомогательных скриптов, которые делегируют выполнение в Windows.

## Кратко
- Редактируете в WSL путь `/mnt/c/Razer_Deboounce`.
- Устанавливаете зависимости и собираете/запускаете через PowerShell на стороне Windows из WSL‑обёрток.
- Скрипт при запуске просит права администратора (UAC), чтобы хук работал.

## Требования
- Windows 10/11 с установленным Python (через `py.exe`).
- WSL (Ubuntu/…): доступ к `powershell.exe` и `wslpath`.

## Установка зависимостей (из WSL)

```
# из корня репозитория (в WSL)
./scripts/run_admin_from_wsl.sh --setup
```

Что делает:
- Создаёт виртуальное окружение Windows `C:\Razer_Deboounce\.venv`.
- Устанавливает зависимости из `requirements.txt` (Pillow, pystray, pywin32, pyinstaller).

## Запуск фильтра (из WSL)

```
# старт с правами админа, параметры пробрасываются скрипту
./scripts/run_admin_from_wsl.sh -- --debug --repeat-jitter 5 --no-startup
```

Примечания:
- После старта иконка появится в системном трее Windows.
- Флаг `--no-startup` отключает запись в автозапуск.

## Сборка (из WSL)

```
./scripts/run_admin_from_wsl.sh --build
```

Результат в `C:\Razer_Deboounce\dist\`.

## Частые параметры
- `--ms N` — базовое окно дребезга.
- `--repeat-min N` — мин. интервал повтора.
- `--repeat-jitter N` — допуск джиттера повтора.
- `--no-startup` — не добавлять в автозапуск.

## Тонкости
- Все «привилегированные» действия выполняются в Windows‑процессе (через PowerShell), не в WSL.
- В логи пишем в `%APPDATA%\bw3_chatter.log` (Windows пользователь).
- Если антивирус блокирует хук, запускайте Windows‑терминал «От имени администратора».

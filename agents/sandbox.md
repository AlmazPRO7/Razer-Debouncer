# Режимы песочницы

Поддерживаются два режима работы среды разработки. Выберите подходящий под задачу и уровень доверия.

## 1) Safe Sandbox (по умолчанию)
- Filesystem: `workspace-write` (запись только в каталог проекта).
- Network: `OFF` (по умолчанию).
- Approvals: `on-failure`.
- Принципы: без админ‑прав, без записи в реестр/системные каталоги, без сетевых операций.

## 2) High-Priv Dev Mode (сеть + полные привилегии)
- Filesystem: `danger-full-access` (нет ограничений по файловой системе).
- Network: `ON` (доступ в интернет, установка зависимостей, загрузка артефактов).
- Approvals: `never` или `on-request` (на ваш процесс).
- OS‑уровень: запускайте терминал/раннер с правами администратора.

Включение High-Priv в Codex CLI/harness:
1. Установите в конфиге проекта: `filesystem: danger-full-access`.
2. Разрешите `network: ON`.
3. Выберите approvals: `never` (авто) или `on-request` (ручной контроль).
4. Запускайте с админ‑правами, если требуются операции с реестром/хуками.

Замечания по безопасности:
- Включайте High-Priv только в доверенной среде.
- Рекомендуется вести логи изменений и артефактов, использовать контроль версий.

## Запуск приложения на Windows
Скрипт `bw3_debounce3.py` при обычном использовании может требовать прав администратора (LowLevel‑hook) и писать в реестр (автозапуск). Это выполняется пользователем вне Codex‑песочницы. Разработка — в выбранном выше режиме.

## Политика CI/CD и сети (обязательно)

- Никогда не используем GitHub Actions и любые внешние облачные CI. Это требование фиксируется как политика по умолчанию для всех задач.
- Сеть по умолчанию выключена. Любой сетевой доступ (например, `git fetch/push`, установка библиотек) выполняется только на локальной машине разработчика и осознанно.
- Синхронизация с GitHub выполняется офлайн‑способами (пэйлоады/патчи), после чего разработчик вручную пушит изменения.

## Офлайн‑синхронизация (рекомендуемый процесс)

1. Агент формирует пэйлоад `dist/offline_payload/` с обновлёнными файлами и скриптом `scripts/apply_payload.ps1`.
2. В локальном клоне `Razer-Debouncer` запустить:
   - `powershell -ExecutionPolicy Bypass -File scripts/apply_payload.ps1 -Source <путь_к_пэйлоаду> -Target <путь_к_клону>`
3. Проверить локально (ручные сценарии), затем выполнить `git add -A && git commit && git push`.
4. Создать PR вручную в GitHub (без CI).

# Режимы песочницы

Проект работает онлайн по умолчанию. Рекомендуемый профиль — Online Dev Mode.

## Online Dev Mode (по умолчанию)
- Filesystem: `danger-full-access` или `workspace-write` (по потребности задач).
- Network: `ON` (git fetch/pull/push, установка зависимостей, загрузка артефактов).
- Approvals: `on-request` или `never` — по вашему процессу и политике безопасности.
- OS‑уровень: для операций с LowLevel‑хуками/реестром — запускать от администратора.

Включение Online Dev Mode в Codex CLI/harness:
1. Установите в конфиге проекта `network: ON`.
2. Подберите уровень доступа к файловой системе: `workspace-write` (минимально достаточно) или `danger-full-access`.
3. Настройте approvals: `on-request` (ручной контроль) или `never` (автоматизация).
4. При необходимости прав администратора — запускайте терминал/раннер Elevated.

Замечания по безопасности:
- Работайте только с доверенными зависимостями и ключами.
- Секреты/ключи не коммитим в репозиторий; используем переменные окружения/локальные файлы.

## Запуск приложения на Windows
Скрипт `bw3_debounce3.py` при обычном использовании может требовать прав администратора (LowLevel‑hook) и писать в реестр (автозапуск). Это выполняется пользователем вне Codex‑песочницы. Разработка — в выбранном выше режиме.

## Политика CI/CD и сети (обязательно)

- Не используем GitHub Actions и внешние облачные CI.
- Работаем онлайн: сетевые операции (`git fetch/pull/push`, установка зависимостей) выполняются из окружения разработки с учётом ключей/секретов.
- Публикацию релизов делаем вручную.

### Опционально: Safe Sandbox (офлайн)
Для редких случаев, когда сеть недоступна или нежелательна, можно временно перейти в Safe Sandbox (сеть OFF) и использовать офлайн‑синхронизацию пэйлоадами.

## Офлайн‑синхронизация (рекомендуемый процесс)

1. Агент формирует пэйлоад `dist/offline_payload/` с обновлёнными файлами и скриптом `scripts/apply_payload.ps1`.
2. В локальном клоне `Razer-Debouncer` запустить:
   - `powershell -ExecutionPolicy Bypass -File scripts/apply_payload.ps1 -Source <путь_к_пэйлоаду> -Target <путь_к_клону>`
3. Проверить локально (ручные сценарии), затем выполнить `git add -A && git commit && git push`.
4. Создать PR вручную в GitHub (без CI).
